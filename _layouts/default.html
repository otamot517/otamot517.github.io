<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">
  {%- include head.html -%}

  <style>
    :root {
      --sidebar-width: 280px;
      --sidebar-bg: #1e1e1e; /* 參考 Gemini 的深色底 */
      --content-bg: #ffffff;
      --transition-speed: 0.3s;
    }

    body { margin: 0; font-family: sans-serif; overflow-x: hidden; }

    /* 頂部控制列 (手機版或收合時顯示) */
    .top-bar {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: var(--content-bg);
      border-bottom: 1px solid #eee;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .site-container {
      display: flex;
      transition: all var(--transition-speed);
    }

    /* 側邊欄基礎樣式 */
    .sidebar-wrapper {
      width: var(--sidebar-width);
      background: var(--sidebar-bg);
      color: #fff;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      transition: transform var(--transition-speed);
      display: flex;
      flex-direction: column;
      z-index: 1000;
    }

    /* 收合狀態：將側邊欄推出去 */
    .collapsed .sidebar-wrapper {
      transform: translateX(-100%);
    }

    /* 內容區樣式 */
    .main-content {
      flex: 1;
      margin-left: var(--sidebar-width);
      min-height: 100vh;
      transition: margin var(--transition-speed);
      background: var(--content-bg);
    }

    .collapsed .main-content {
      margin-left: 0;
    }

    /* 按鈕樣式 */
    .toggle-btn {
      background: none;
      border: none;
      color: inherit;
      font-size: 24px;
      cursor: pointer;
      padding: 5px 15px;
    }

    /* 側邊欄內的細節美化 */
    .sidebar-header { padding: 20px; display: flex; align-items: center; gap: 10px; }
    .sidebar-logo img { width: 32px; border-radius: 8px; }
    .nav-label { font-size: 12px; color: #888; padding: 10px 25px; text-transform: uppercase; }
    .nav-item { 
      padding: 12px 25px; 
      display: flex; 
      align-items: center; 
      gap: 15px; 
      color: #ccc; 
      text-decoration: none;
      transition: 0.2s;
    }
    .nav-item:hover { background: #333; color: #fff; border-radius: 0 25px 25px 0; margin-right: 10px; }

    /* Sakana Widget 修正 */
    #sakana-widget { position: fixed !important; right: 20px !important; bottom: 20px !important; z-index: 999; }
  </style>

  <body>
    <div class="top-bar">
      <button id="sidebar-toggle-open" class="toggle-btn" style="color:#333">☰</button>
      <span style="margin-left:10px; font-weight:bold;">{{ page.title }}</span>
    </div>

    <div class="site-container" id="site-wrapper">
      {%- include sidebar.html -%}

      <main class="main-content">
        <div class="wrapper" style="max-width: 800px; margin: 0 auto; padding: 40px 20px;">
          {{ content }}
        </div>
        {%- include footer.html -%}
      </main>
    </div>

    <script>
      const wrapper = document.getElementById('site-wrapper');
      const btnOpen = document.getElementById('sidebar-toggle-open');
      const btnClose = document.getElementById('sidebar-toggle-close');

      function toggleSidebar() {
        wrapper.classList.toggle('collapsed');
      }

      btnOpen.onclick = toggleSidebar;
      btnClose.onclick = toggleSidebar;
    </script>

    </body>
</html>